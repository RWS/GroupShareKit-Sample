@using System.Web.Mvc.Html
@model GroupShareKitSample.Models.TermbaseViewModel

<div class="row">
    <h4>Search termbase</h4>
</div>

<div class="row">
    <div class="col-md-12">


        <form id="searchForm">
            <div class="form-horizontal">
                <div class="form-group">
                    <label class="col-md-2 control-label">Searched term:</label>
                    <input type="text" placeholder="Term searched" class="form-control col-md-10" id="searchedTerm" required />
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label">Source language:</label>
                    <input type="text" placeholder="Source language" class="form-control col-md-10" id="sourceLang" required />
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label">Target language:</label>
                    <input type="text" placeholder="Target language" class="form-control col-md-10" id="targLang" required />
                </div>

                <div class="form-group">
                    <label for="tbselect" class="col-md-2 control-label">Termbase:</label>
                    <select class="form-control" name="tbselect" id="tbselect">
                        @foreach (var termbase in Model.Termbases)
                        {
                            <option value="@termbase.Id">@termbase.Name</option>
                        }
                    </select>
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-primary" onclick="searchTermbase()"> Search</button>
                </div>
            </div>
        </form>
    </div>
</div>
<div class="row">
    <div id="termbaseSearchResults">


    </div>
    <div id="termDetails">
        
    </div>
</div>
    

@section scripts{
    <script type="text/javascript">
        document.getElementById('searchForm').onsubmit = function (e) {
            e.preventDefault();
        }
        function searchTermbase() {
            var term = $('#searchedTerm').val();
            var sourceLang = $('#sourceLang').val();
            var targLang = $('#targLang').val();
            var termbaseSelect = document.getElementById('tbselect');
            var termbaseId = termbaseSelect[termbaseSelect.selectedIndex].value;

            $.ajax({
                url: '@Url.Action("Search")',
                cache: false,
                data: { 'term': term, 'sourceLanguage': sourceLang, 'targetLanguage': targLang, 'termbaseId': termbaseId },
                success: function (response) {
                    $('#termbaseSearchResults').html(response);
                }
            });
        }
        function termDetails(termbaseId,conceptId) {
            $.ajax({
                url: '@Url.Action("TermDetails")',
                chache: false,
                data: { 'termbaseId': termbaseId, 'conceptId': conceptId },
                success:function(response) {
                    $('#termDetails').html(response);
                }
            });
        }
        function removeTerm(termbaseId,conceptId) {
        }

    </script>
}
